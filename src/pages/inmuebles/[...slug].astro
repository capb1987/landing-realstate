---
import Layout from "@/layouts/Layout.astro";
import { IoIosPricetag, IoIosHome, IoIosBed } from "react-icons/io";
import {
  FaBath,
  FaRuler,
  FaParking,
  FaArrowAltCircleLeft,
} from "react-icons/fa";
import { formatearCOP } from "@/utils";
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import { getCollection } from "astro:content";

import { fade } from "astro:transitions";

// 1. Generar rutas estáticas para cada apartamento
export async function getStaticPaths() {
  const entradasInmuebles: CollectionEntry<"inmuebles">[] =
    await getCollection("inmuebles");
  return entradasInmuebles.map((entrada) => ({
    params: { slug: entrada.id.replace(/\.[^/.]+$/, "") },
    props: { entrada },
  }));
}

const { entrada } = Astro.props;
const { data } = entrada;
---

<Layout
  titulo={`Smart House - Apartamento ${data.titulo}`}
  descripcion={data.titulo}
>
  <section transition:animate={fade({ duration: "0.35s" })}>
    <h1 class="text-2xl md:text-6xl font-bold uppercase text-center p-2 md:p-6">
      {data.titulo}
    </h1>
    <div class="flex">
      <Image
        src={data.imagen}
        alt={data.titulo}
        width={1000}
        height={1000}
        class="w-full max-h-100 h-full shadow-md object-cover object-center my-4 md:my-8"
        loading="eager"
        data-aos="fade-in"
        data-aos-delay="50"
        data-aos-duration="1000"
      />
    </div>

    <main>
      <div
        class="flex flex-col md:flex-row justify-between max-w-3xl mx-auto gap-2 p-2 md:p-6 bg-linear-to-br from-amber-300 via-amber-200 to-amber-100 md:rounded-md shadow-3xl"
        data-aos="zoom-out"
        data-aos-delay="150"
        data-aos-duration="1000"
      >
        <p
          class="flex justify-between items-center gap-2 text-2xl font-semibold border-b border-stone-500 md:border-b-0 p-2"
        >
          <IoIosPricetag />
          <span class="text-lg md:text-xl">
            {formatearCOP(data.precio)}
          </span>
        </p>
        <p
          class="flex justify-between items-center gap-2 text-2xl font-semibold border-b border-stone-500 md:border-b-0 p-2"
        >
          <span><IoIosHome /></span>
          <span class="text-lg md:text-xl">{data.barrio}</span>
        </p>

        <p
          class="flex justify-between items-center gap-2 text-2xl font-semibold border-b border-stone-500 md:border-b-0 p-2"
        >
          <span><IoIosBed /></span>
          <span class="text-lg md:text-xl">{data.habitaciones}</span>
        </p>

        <p
          class="flex justify-between items-center gap-2 text-2xl font-semibold border-b border-stone-500 md:border-b-0 p-2"
        >
          <span><FaBath /></span>
          <span class="text-lg md:text-xl">{data.baños}</span>
        </p>

        <p
          class="flex justify-between items-center gap-2 text-2xl font-semibold border-b border-stone-500 md:border-b-0 p-2"
        >
          <span><FaRuler /></span>
          <span class="text-lg md:text-xl">{data.area}</span>
        </p>

        <p
          class="flex justify-between items-center gap-2 text-2xl font-semibold md:border-b-0 p-2"
        >
          <span><FaParking /></span>
          <span class="text-lg md:text-xl"
            >{data.parqueadero ? "Si" : "No"}</span
          >
        </p>
      </div>

      <p
        class="text-lg md:text-3xl max-w-4xl container mx-auto p-4 md:p-8 text-center md:text-justify font-light leading-relaxed"
        data-aos="zoom-out"
        data-aos-delay="150"
        data-aos-duration="1000"
      >
        {entrada.body}

        <div class="flex justify-center p-2 md:p-4">
          <a
            href="/#propiedades"
            class="bg-amber-200 text-slate-700 p-3 md:p-6 uppercase font-bold w-full md:w-1/2 lg:w-1/3 text-center text-lg md:text-2xl rounded-2xl shadow-md hover:bg-amber-300 transition-all duration-300 ease-in-out flex gap-2 items-center justify-center"
          >
            <span class="text-lg md:text-6xl"><FaArrowAltCircleLeft /></span>
            Volver a propiedades
          </a>
        </div>
      </p>
    </main>
  </section>
</Layout>
