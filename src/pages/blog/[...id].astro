---
import Layout from "@/layouts/Layout.astro";
import { FaArrowAltCircleLeft, FaCalendar, FaUserCircle } from "react-icons/fa";
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import { getCollection } from "astro:content";

import { fade } from "astro:transitions";

// 1. Generar rutas est√°ticas para cada apartamento
export async function getStaticPaths() {
  const blogs: CollectionEntry<"blog">[] = await getCollection("blog");
  return blogs.map((entrada) => ({
    params: { id: entrada.id },
    props: { entrada },
  }));
}

const { entrada } = Astro.props;
const { data } = entrada;
---

<Layout
  titulo={`Smart House - Apartamento ${data.titulo}`}
  descripcion={data.titulo}
>
  <section transition:animate={fade({ duration: "0.25s" })}>
    <h1 class="text-2xl md:text-6xl font-bold uppercase text-center p-2 md:p-6">
      {data.titulo}
    </h1>

    <div
      class="divider text-slate-400 md:max-w-7xl container mx-auto font-semibold w-full text-xs md:text-base text-wrap sm:text-nowrap my-10 md:my-6 text-center"
    >
      {data.descripcion}
    </div>
    <div class="flex">
      <Image
        src={data.imagen}
        alt={data.titulo}
        width={1000}
        height={1000}
        class="w-full max-h-150 h-full object-cover md:object-fill object-center my-4 md:my-8 shadow-md"
        loading={"eager"}
        data-aos="fade-in"
        data-aos-delay="50"
        data-aos-duration="1000"
      />
    </div>

    <main>
      <div
        class="text-2xl text-center p-2 md:p-4 w-full flex flex-col md:flex-row gap-2 md:gap-4 justify-center items-center md:justify-around"
      >
        <div class="flex flex-col md:flex-row gap-2 md:gap-4">
          <span
            class="flex gap-2 justify-center items-center text-sm md:text-base lg:text-xl font-mono"
          >
            <FaCalendar /> {entrada.data.fecha}</span
          >
        </div>
        <div>
          <span
            class="flex gap-2 justify-center items-center text-sm md:text-base lg:text-lg font-mono flex-wrap"
          >
            <FaUserCircle />
            <span class="font-semibold"> Escrito por:</span>
            {entrada.data.autor}
          </span>
        </div>
      </div>
      <div
        class="flex flex-col md:flex-row gap-2 md:gap-4 justify-center items-center p-2 md:p-4"
        data-aos="fade-in"
        data-aos-delay="50"
        data-aos-duration="1000"
      >
        {
          entrada.data.tags.map((tag) => (
            <div class="badge badge-neutral w-full p-4 md:p-6 font-semibold text-sm md:text-base lg:text-lg">
              {tag}
            </div>
          ))
        }
      </div>
    </main>

    <div class="text-2xl font-thin italic text-center p-2 md:p-4 w-full">
      <div
        class="text-lg md:text-3xl max-w-6xl container mx-auto p-2 text-center md:text-justify font-light"
      >
        <div
          class="space-y-3 md:space-y-6 text-sm md:text-base lg:text-lg xl:text-2xl text md:text-justify p-2 md:p-4 leading-relaxed font-medium"
          data-aos="zoom-in"
          data-aos-delay="150"
          data-aos-duration="1000"
          set:html={entrada.rendered?.html}
        />

        <div
          class="flex justify-center p-2 md:p-4"
          data-aos="fade-in"
          data-aos-delay="200"
          data-aos-duration="1000"
        >
          <a
            href="/#blog"
            class="bg-amber-200 p-3 md:p-6 uppercase font-bold w-full md:w-1/2 lg:w-1/3 text-center text-lg md:text-2xl rounded-2xl shadow-md hover:bg-amber-300 transition-all duration-300 ease-in-out flex gap-2 items-center justify-center text-slate-800"
          >
            <span class="text-lg md:text-6xl"><FaArrowAltCircleLeft /></span>
            Volver al blog
          </a>
        </div>
      </div>
    </div>
  </section>
</Layout>
